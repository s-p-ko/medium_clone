import React, { useContext } from 'react'

import { CurrentUserContext } from 'contexts/currentUser'
import { defaultUserImagePath } from 'utils'

const UserImage = ({ className = null, alt = null }) => {
    const [currentUserState] = useContext(CurrentUserContext)
    const path = (currentUserState.isLoggedIn && currentUserState.currentUser.image) || defaultUserImagePath
    const username = currentUserState.currentUser.username
    //Делаю приоритетным для вывода в качестве альтернативного текста то,
    //что вносим в alt(даже, если это пустая строка)
    const alternativeText = alt ?? username

    return (
        <img
            className={className}
            src={path}
            //то, что подставляется в alt явно преобразую в строку
            alt={String(alternativeText)}
        />
    )
}

export default UserImage
